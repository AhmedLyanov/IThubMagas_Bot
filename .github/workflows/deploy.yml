name: IThub Magas Bot

on: 
    push: 
        branches: [main]
        
jobs: 
    deploy:
        runs-on: ubuntu-latest
        steps:
        - name: Connect to server and deploy new version
          uses: appleboy/ssh-action@v1.0.3
          with: 
            host: ${{ secrets.SERVER_HOST }}
            username: ${{ secrets.SERVER_USERNAME }}
            key: ${{ secrets.SERVER_SSH_DATA }}
            script: |
              cd IThubMagas_Bot/
              git pull
              npm i 
              pm2 restart IThubMagas_Bot_Tg
